function CRMod({s,d}){const ae=s.emps||[];const [tab,setTab]=useState("cr");const masseBrute=ae.reduce((a,e)=>a+(+e.gross||0),0);const onssP=masseBrute*0.2507;const onssT=masseBrute*0.1307;const pp=masseBrute*0.22;const nets=masseBrute-onssT-pp;const coutTotal=masseBrute+onssP;const ratioNet=masseBrute>0?((nets/coutTotal)*100).toFixed(1):"0";return <div><PH title="Cout de la Remuneration" sub="Analyse cout employeur vs net travailleur - Masse salariale"/><div style={{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:12,marginBottom:18}}>{[{l:"Masse brute",v:fmt(masseBrute),c:"#c6a34e"},{l:"ONSS patronal",v:fmt(onssP),c:"#f87171"},{l:"Cout total empl.",v:fmt(coutTotal),c:"#f87171"},{l:"Net total trav.",v:fmt(nets),c:"#4ade80"},{l:"Ratio net/cout",v:ratioNet+"%",c:"#fb923c"}].map((k,i)=><div key={i} style={{padding:"14px 16px",background:"rgba(198,163,78,.04)",borderRadius:10,border:"1px solid rgba(198,163,78,.08)"}}><div style={{fontSize:10,color:"#5e5c56",textTransform:"uppercase",letterSpacing:".5px"}}>{k.l}</div><div style={{fontSize:18,fontWeight:700,color:k.c,marginTop:4}}>{k.v}</div></div>)}</div><div style={{display:"flex",gap:6,marginBottom:16}}>{[{v:"cr",l:"Vue globale"},{v:"detail",l:"Par travailleur"},{v:"charges",l:"Detail charges"}].map(t=><button key={t.v} onClick={()=>setTab(t.v)} style={{padding:"8px 16px",borderRadius:8,border:"none",cursor:"pointer",fontSize:12,fontWeight:tab===t.v?600:400,fontFamily:"inherit",background:tab===t.v?"rgba(198,163,78,.15)":"rgba(255,255,255,.03)",color:tab===t.v?"#c6a34e":"#9e9b93"}}>{t.l}</button>)}</div>{tab==="cr"&&<C><ST>Decomposition masse salariale mensuelle</ST>{[{l:"Salaires bruts",v:masseBrute,c:"#e8e6e0"},{l:"ONSS patronal (25.07%)",v:onssP,c:"#f87171"},{l:"Cout total employeur",v:coutTotal,c:"#f87171"},{l:"ONSS personnel (-13.07%)",v:-onssT,c:"#f87171"},{l:"Precompte prof. (~22%)",v:-pp,c:"#f87171"},{l:"Net total travailleurs",v:nets,c:"#4ade80"}].map((r,i)=><div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><span style={{color:"#9e9b93"}}>{r.l}</span><span style={{fontWeight:600,color:r.c}}>{r.v<0?"- "+fmt(Math.abs(r.v)):fmt(r.v)}</span></div>)}</C>}{tab==="detail"&&<C><Tbl cols={[{k:"n",l:"Travailleur",b:1,r:r=>(r.fn||"")+" "+(r.ln||"")},{k:"g",l:"Brut",a:"right",r:r=><span style={{color:"#e8e6e0"}}>{fmt(+r.gross||0)}</span>},{k:"o",l:"ONSS empl.",a:"right",r:r=><span style={{color:"#f87171"}}>{fmt((+r.gross||0)*0.2507)}</span>},{k:"c",l:"Cout empl.",a:"right",r:r=><span style={{color:"#f87171",fontWeight:700}}>{fmt((+r.gross||0)*1.2507)}</span>},{k:"ne",l:"Net estim.",a:"right",r:r=><span style={{color:"#4ade80"}}>{fmt((+r.gross||0)*0.5645)}</span>}]} data={ae}/></C>}{tab==="charges"&&<C><ST>Detail charges patronales</ST>{[{l:"ONSS de base",v:"24.92%",d:"Cotisation principale"},{l:"Moderation salariale",v:"0.15%",d:"Depuis 2024"},{l:"Total ONSS patronal",v:"25.07%",d:"Taux global"},{l:"Assurance accidents travail",v:"~1%",d:"Selon secteur et sinistralite"},{l:"Medecine du travail",v:"91.50 EUR/an",d:"Par travailleur soumis"},{l:"Cheques-repas (part patronale)",v:"Max 6.91 EUR/j",d:"220 jours = 1.520 EUR/an"},{l:"Eco-cheques",v:"Max 250 EUR/an",d:"Si prevu par CCT sectorielle"},{l:"13eme mois",v:"~8.33%",d:"1/12 du salaire annuel"},{l:"Pecule vacances double",v:"~15.38%",d:"Ouvriers via ONVA / Employes direct"}].map((r,i)=><div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><div><span style={{color:"#e8e6e0"}}>{r.l}</span><div style={{fontSize:10,color:"#5e5c56"}}>{r.d}</div></div><span style={{fontWeight:600,color:"#c6a34e"}}>{r.v}</span></div>)}</C>}</div>;}
