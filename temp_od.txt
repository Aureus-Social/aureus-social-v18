function ODMod({s,d}){const ae=s.emps||[];const [tab,setTab]=useState("ops");const [ops,setOps]=useState([{id:1,date:"2026-01-31",type:"Salaires",desc:"Virement salaires nets janvier",montant:ae.reduce((a,e)=>a+(+e.gross||0)*0.5645,0),sens:"D",compte:"455000"},{id:2,date:"2026-01-31",type:"ONSS",desc:"Cotisations ONSS T1 2026",montant:ae.reduce((a,e)=>a+(+e.gross||0)*0.3814,0),sens:"D",compte:"454000"},{id:3,date:"2026-01-31",type:"Precompte",desc:"Precompte professionnel janvier",montant:ae.reduce((a,e)=>a+(+e.gross||0)*0.2285,0),sens:"D",compte:"453000"},{id:4,date:"2026-02-28",type:"Provisions",desc:"Provision pecule vacances",montant:ae.reduce((a,e)=>a+(+e.gross||0)*0.1538,0),sens:"C",compte:"456000"},{id:5,date:"2026-02-28",type:"Provisions",desc:"Provision 13eme mois",montant:ae.reduce((a,e)=>a+(+e.gross||0)*0.0833,0),sens:"C",compte:"456100"}]);const totD=ops.filter(o=>o.sens==="D").reduce((a,c)=>a+c.montant,0);const totC=ops.filter(o=>o.sens==="C").reduce((a,c)=>a+c.montant,0);return <div><PH title="Operations Diverses" sub="Journal OD paie - Ecritures comptables"/><div style={{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:12,marginBottom:18}}>{[{l:"Total debit",v:fmt(totD),c:"#f87171"},{l:"Total credit",v:fmt(totC),c:"#4ade80"},{l:"Ecritures",v:ops.length,c:"#60a5fa"},{l:"Balance",v:fmt(Math.abs(totD-totC)),c:"#c6a34e"}].map((k,i)=><div key={i} style={{padding:"14px 16px",background:"rgba(198,163,78,.04)",borderRadius:10,border:"1px solid rgba(198,163,78,.08)"}}><div style={{fontSize:10,color:"#5e5c56",textTransform:"uppercase",letterSpacing:".5px"}}>{k.l}</div><div style={{fontSize:18,fontWeight:700,color:k.c,marginTop:4}}>{k.v}</div></div>)}</div><div style={{display:"flex",gap:6,marginBottom:16}}>{[{v:"ops",l:"Journal OD"},{v:"comptes",l:"Par compte"},{v:"export",l:"Export comptable"}].map(t=><button key={t.v} onClick={()=>setTab(t.v)} style={{padding:"8px 16px",borderRadius:8,border:"none",cursor:"pointer",fontSize:12,fontWeight:tab===t.v?600:400,fontFamily:"inherit",background:tab===t.v?"rgba(198,163,78,.15)":"rgba(255,255,255,.03)",color:tab===t.v?"#c6a34e":"#9e9b93"}}>{t.l}</button>)}</div>{tab==="ops"&&<C><Tbl cols={[{k:"d",l:"Date",r:r=>r.date},{k:"t",l:"Type",r:r=><span style={{fontSize:10,padding:"2px 6px",borderRadius:4,background:"rgba(198,163,78,.08)",color:"#c6a34e"}}>{r.type}</span>},{k:"de",l:"Description",b:1,r:r=>r.desc},{k:"co",l:"Compte",r:r=><span style={{fontFamily:"monospace",color:"#60a5fa"}}>{r.compte}</span>},{k:"s",l:"D/C",r:r=><span style={{color:r.sens==="D"?"#f87171":"#4ade80",fontWeight:700}}>{r.sens}</span>},{k:"m",l:"Montant",a:"right",r:r=><span style={{fontWeight:600,color:"#e8e6e0"}}>{fmt(r.montant)}</span>}]} data={ops}/></C>}{tab==="comptes"&&<C><ST>Regroupement par compte</ST>{Object.entries(ops.reduce((a,o)=>{if(!a[o.compte])a[o.compte]={d:0,c:0,desc:o.desc};if(o.sens==="D")a[o.compte].d+=o.montant;else a[o.compte].c+=o.montant;return a;},{})).map(([c,v],i)=><div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><span style={{color:"#60a5fa",fontFamily:"monospace"}}>{c}</span><span style={{color:"#9e9b93",flex:1,marginLeft:12}}>{v.desc}</span><span style={{color:"#f87171",marginRight:12}}>{v.d>0?"D "+fmt(v.d):""}</span><span style={{color:"#4ade80"}}>{v.c>0?"C "+fmt(v.c):""}</span></div>)}</C>}{tab==="export"&&<C><ST>Formats export disponibles</ST>{["BOB50 - Format .txt standard","Winbooks - Import CSV","Exact Online - API REST","Horus - Format XML","Octopus - CSV import","Yuki - Format standard"].map((r,i)=><div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><span style={{color:"#e8e6e0"}}>{r}</span><span style={{fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(251,146,56,.1)",color:"#fb923c"}}>A implementer</span></div>)}</C>}</div>;}
