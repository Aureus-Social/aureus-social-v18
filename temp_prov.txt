function ProvisionsMod({s,d}){const ae=s.emps||[];const [tab,setTab]=useState("prov");const mb=ae.reduce((a,e)=>a+(+e.gross||0),0);const provVac=mb*0.1538;const prov13=mb*0.0833;const provPreavis=mb*0.05;const provRisques=mb*0.02;const totalProv=provVac+prov13+provPreavis+provRisques;return <div><PH title="Provisions Sociales" sub="Provisions comptables obligatoires - Pecule, 13eme, preavis, risques"/><div style={{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:12,marginBottom:18}}>{[{l:"Pecule vacances",v:fmt(provVac),c:"#60a5fa"},{l:"13eme mois",v:fmt(prov13),c:"#a78bfa"},{l:"Preavis",v:fmt(provPreavis),c:"#fb923c"},{l:"Risques divers",v:fmt(provRisques),c:"#f87171"},{l:"Total provisions",v:fmt(totalProv),c:"#c6a34e"}].map((k,i)=><div key={i} style={{padding:"14px 16px",background:"rgba(198,163,78,.04)",borderRadius:10,border:"1px solid rgba(198,163,78,.08)"}}><div style={{fontSize:10,color:"#5e5c56",textTransform:"uppercase",letterSpacing:".5px"}}>{k.l}</div><div style={{fontSize:18,fontWeight:700,color:k.c,marginTop:4}}>{k.v}</div></div>)}</div><div style={{display:"flex",gap:6,marginBottom:16}}>{[{v:"prov",l:"Provisions mensuelles"},{v:"annuel",l:"Projection annuelle"},{v:"regles",l:"Regles comptables"}].map(t=><button key={t.v} onClick={()=>setTab(t.v)} style={{padding:"8px 16px",borderRadius:8,border:"none",cursor:"pointer",fontSize:12,fontWeight:tab===t.v?600:400,fontFamily:"inherit",background:tab===t.v?"rgba(198,163,78,.15)":"rgba(255,255,255,.03)",color:tab===t.v?"#c6a34e":"#9e9b93"}}>{t.l}</button>)}</div>{tab==="prov"&&<C><Tbl cols={[{k:"p",l:"Provision",b:1,r:r=>r.nom},{k:"t",l:"Taux",r:r=><span style={{color:"#c6a34e"}}>{r.taux}</span>},{k:"b",l:"Base",r:r=>r.base},{k:"m",l:"Mensuel",a:"right",r:r=><span style={{fontWeight:600,color:"#e8e6e0"}}>{fmt(r.mensuel)}</span>},{k:"a",l:"Annuel",a:"right",r:r=><span style={{fontWeight:600,color:"#fb923c"}}>{fmt(r.mensuel*12)}</span>}]} data={[{nom:"Pecule vacances double",taux:"15.38%",base:"Brut mensuel",mensuel:provVac},{nom:"13eme mois / Prime fin annee",taux:"8.33%",base:"Brut mensuel",mensuel:prov13},{nom:"Provision preavis",taux:"5%",base:"Brut mensuel",mensuel:provPreavis},{nom:"Risques sociaux divers",taux:"2%",base:"Brut mensuel",mensuel:provRisques}]}/><div style={{display:"flex",justifyContent:"space-between",padding:"12px 0",borderTop:"2px solid rgba(198,163,78,.3)",marginTop:8}}><span style={{fontWeight:700,color:"#e8e6e0"}}>TOTAL PROVISIONS MENSUELLES</span><span style={{fontWeight:700,color:"#c6a34e",fontSize:16}}>{fmt(totalProv)}</span></div></C>}{tab==="annuel"&&<C><ST>Projection annuelle</ST>{[{l:"Pecule vacances double",v:provVac*12,c:"#60a5fa"},{l:"13eme mois",v:prov13*12,c:"#a78bfa"},{l:"Provision preavis",v:provPreavis*12,c:"#fb923c"},{l:"Risques sociaux",v:provRisques*12,c:"#f87171"},{l:"TOTAL ANNUEL",v:totalProv*12,c:"#c6a34e"}].map((r,i)=><div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><span style={{color:"#9e9b93"}}>{r.l}</span><span style={{fontWeight:600,color:r.c}}>{fmt(r.v)}</span></div>)}</C>}{tab==="regles"&&<C><ST>Regles comptables provisions</ST>{[{t:"Pecule vacances",d:"Obligatoire. Comptabilise mensuellement au prorata. Employes: paye par employeur. Ouvriers: via ONVA."},{t:"13eme mois",d:"Si prevu par CCT ou contrat. Provision mensuelle 1/12. Soumis ONSS + PP."},{t:"Preavis",d:"Provision recommandee. Base: estimation indemnite selon anciennete (Loi Statut Unique)."},{t:"Risques sociaux",d:"Provision pour litiges prudhommes, accidents, maladies longue duree. Estimation prudente."}].map((r,i)=><div key={i} style={{padding:"10px 0",borderBottom:"1px solid rgba(255,255,255,.03)"}}><b style={{color:"#c6a34e",fontSize:12}}>{r.t}</b><div style={{fontSize:10.5,color:"#9e9b93",marginTop:2}}>{r.d}</div></div>)}</C>}</div>;}
